(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6664],{39781:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/voting",function(){return o(34884)}])},47933:function(e,t,o){"use strict";var a=o(85893),l=o(50544),n=o(75981),s=o(67294);let i=e=>{let t=(0,s.useMemo)(()=>({background:{color:{value:"#dfa9ff"},image:"linear-gradient(#002e4f 40%, #8cacfa 60%)",position:"",repeat:"",size:"",opacity:1},fullScreen:{enable:!0,zIndex:-1},interactivity:{events:{onClick:{enable:!0,mode:"push"},onHover:{enable:!0,mode:"repulse"}},modes:{push:{quantity:10},repulse:{distance:100}}},particles:{links:{enable:!0,distance:150},move:{enable:!0,speed:{min:-1,max:1}},opacity:{value:{min:.3,max:.7}},size:{value:{min:1,max:3}}}}),[]),o=(0,s.useCallback)(e=>{(0,n.S)(e)},[]);return(0,a.jsx)(l.Z,{id:e.id,init:o,options:t})};t.Z=i},34884:function(e,t,o){"use strict";o.r(t);var a=o(85893),l=o(73343),n=o(44680),s=o(67294),i=o(9279),r=o(16152),d=o.n(r),c=o(47933);let _=()=>{let e=(0,l.SF)(),t=(0,l.LN)();console.log("\uD83D\uDC4B Address:",e);let{contract:o}=(0,l.cq)("0x58f602B9098Ef521E3df4b78965c0201c39D9875","edition-drop"),{contract:r}=(0,l.cq)("0xf76c3a4844249F7A5357D5ec68f80549C7952497","token"),{contract:_}=(0,l.cq)("0x850D08a7901d49af93b375976f66c7e0D88D78BA","vote"),{data:p}=(0,l.$F)(o,e,"0"),u=(0,s.useMemo)(()=>p&&p.gt(0),[p]),[x,h]=(0,s.useState)([]),[m,B]=(0,s.useState)([]),g=e=>e.substring(0,6)+"..."+e.substring(e.length-4),[f,j]=(0,s.useState)([]),[v,b]=(0,s.useState)(!1),[y,D]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(u)return;let e=async()=>{try{let e=await _.getAll();j(e),console.log("\uD83C\uDF08 Proposals:",e)}catch(e){console.log("failed to get proposals",e)}};e()},[u,_]),(0,s.useEffect)(()=>{if(u||f.length)return;let t=async()=>{try{let t=await _.hasVoted(f[0].proposalId,e);D(t),t?console.log("\uD83E\uDD75 User has already voted"):console.log("\uD83D\uDE42 User has not voted yet")}catch(e){console.error("Failed to check if wallet has voted",e)}};t()},[u,f,e,_]),(0,s.useEffect)(()=>{if(!u)return;let e=async()=>{try{let e=await (null==o?void 0:o.history.getAllClaimerAddresses(0));B(e),console.log("\uD83D\uDE80 Members addresses",e)}catch(e){console.error("failed to get member list",e)}};e()},[u,null==o?void 0:o.history]),(0,s.useEffect)(()=>{if(u)return;let e=async()=>{try{let e=await (null==r?void 0:r.history.getAllHolderBalances());h(e),console.log("\uD83D\uDC5C Amounts",e)}catch(e){console.error("failed to get member balances",e)}};e()},[u,null==r?void 0:r.history]);let S=(0,s.useMemo)(()=>m.map(e=>{let t=null==x?void 0:x.find(t=>{let{holder:o}=t;return o===e});return{address:e,tokenAmount:(null==t?void 0:t.balance.displayValue)||"0"}}),[m,x]);return e&&(null==t?void 0:t[0].data.chain.id)!==n.u.BinanceSmartChainTestnet?(0,a.jsxs)("div",{className:d().unsupported_network,children:[(0,a.jsx)("h2",{children:"Please connect to BinanceSmartChain"}),(0,a.jsx)("p",{children:"This dapp only works on the BinanceSmartChain network, please switch networks in your connected wallet."}),(0,a.jsx)(c.Z,{id:"tsparticles"})]}):e?u?(0,a.jsxs)("div",{className:d().member_page,children:[(0,a.jsx)("h1",{children:"Artchain-Circle Voting Page"}),(0,a.jsx)("p",{children:"Please vote for our next artist"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{children:"Member List"}),(0,a.jsxs)("table",{className:d().card,children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Address"}),(0,a.jsx)("th",{children:"Token Amount"})]})}),(0,a.jsx)("tbody",{children:S.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:g(e.address)}),(0,a.jsx)("td",{children:e.tokenAmount})]},e.address))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{children:"Active Proposals"}),(0,a.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),t.stopPropagation(),b(!0);let o=f.map(e=>{let t={proposalId:e.proposalId,vote:2};return e.votes.forEach(o=>{let a=document.getElementById(e.proposalId+"-"+o.type);if(a.checked){t.vote=o.type;return}}),t});try{let t=await r.getDelegationOf(e);t===i.d&&await r.delegateTo(e);try{await Promise.all(o.map(async e=>{let{proposalId:t,vote:o}=e,a=await _.get(t);if(1===a.state)return _.vote(t,o)}));try{await Promise.all(o.map(async e=>{let{proposalId:t}=e,o=await _.get(t);if(4===o.state)return _.execute(t)})),D(!0),console.log("successfully voted")}catch(e){console.error("failed to execute votes",e)}}catch(e){console.error("failed to vote",e)}}catch(e){console.error("failed to delegate tokens")}finally{b(!1)}},children:[f.map(e=>(0,a.jsxs)("div",{className:d().card,children:[(0,a.jsx)("h5",{children:e.description}),(0,a.jsx)("div",{children:e.votes.map(t=>{let{type:o,label:l}=t;return(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"radio",id:e.proposalId+"-"+o,name:e.proposalId,value:o,defaultChecked:2===o}),(0,a.jsx)("label",{htmlFor:e.proposalId+"-"+o,children:l})]},o)})})]},e.proposalId)),(0,a.jsx)("p",{}),(0,a.jsx)("button",{disabled:v||y,type:"submit",children:v?"Voting...":y?"You Already Voted":"Submit Votes"}),(0,a.jsx)("p",{}),!y&&(0,a.jsx)("small",{children:"This will trigger multiple transactions that you will need to sign."}),(0,a.jsx)("p",{})]})]}),(0,a.jsx)(c.Z,{id:"tsparticles"})]})]}):(0,a.jsxs)("div",{className:d().member_page,children:[(0,a.jsx)("h1",{children:"Artchain-Circle Voting Page"}),(0,a.jsx)("p",{children:"Please vote for our next artist"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{children:"Member List"}),(0,a.jsxs)("table",{className:d().card,children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Address"}),(0,a.jsx)("th",{children:"Token Amount"})]})}),(0,a.jsx)("tbody",{children:S.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:g(e.address)}),(0,a.jsx)("td",{children:e.tokenAmount})]},e.address))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{children:"Active Proposals"}),(0,a.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),t.stopPropagation(),b(!0);let o=f.map(e=>{let t={proposalId:e.proposalId,vote:2};return e.votes.forEach(o=>{let a=document.getElementById(e.proposalId+"-"+o.type);if(a.checked){t.vote=o.type;return}}),t});try{let t=await r.getDelegationOf(e);t===i.d&&await r.delegateTo(e);try{await Promise.all(o.map(async e=>{let{proposalId:t,vote:o}=e,a=await _.get(t);if(1===a.state)return _.vote(t,o)}));try{await Promise.all(o.map(async e=>{let{proposalId:t}=e,o=await _.get(t);if(4===o.state)return _.execute(t)})),D(!0),console.log("successfully voted")}catch(e){console.error("failed to execute votes",e)}}catch(e){console.error("failed to vote",e)}}catch(e){console.error("failed to delegate tokens")}finally{b(!1)}},children:[f.map(e=>(0,a.jsxs)("div",{className:d().card,children:[(0,a.jsx)("h5",{children:e.description}),(0,a.jsx)("div",{children:e.votes.map(t=>{let{type:o,label:l}=t;return(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"radio",id:e.proposalId+"-"+o,name:e.proposalId,value:o,defaultChecked:2===o}),(0,a.jsx)("label",{htmlFor:e.proposalId+"-"+o,children:l})]},o)})})]},e.proposalId)),(0,a.jsx)("p",{}),(0,a.jsx)("button",{disabled:v||y,type:"submit",children:v?"Voting...":y?"You Already Voted":"Submit Votes"}),(0,a.jsx)("p",{}),!y&&(0,a.jsx)("small",{children:"This will trigger multiple transactions that you will need to sign."}),(0,a.jsx)("p",{})]})]}),(0,a.jsx)(c.Z,{id:"tsparticles"})]})]}):(0,a.jsxs)("div",{className:d().landing,children:[(0,a.jsx)("h1",{children:"Please Connect Your Wallet"}),(0,a.jsx)("div",{className:d().btn_hero,children:(0,a.jsx)(l.RZ,{})}),(0,a.jsx)(c.Z,{id:"tsparticles"})]})};t.default=_},16152:function(e){e.exports={h2:"dao_h2__nEaoP",h1:"dao_h1__1Qhch",unsupported_network:"dao_unsupported_network___TZqd",error:"dao_error__i9Hqv",landing:"dao_landing___satj",connect_wallet:"dao_connect_wallet__hbxpJ",mint_nft:"dao_mint_nft__HTV5I",member_page:"dao_member_page__B7cAV",card:"dao_card__74UkD",btn_hero:"dao_btn_hero__Ss5u4",button:"dao_button__aXPIP",connect:"dao_connect___YWxO",btn:"dao_btn__8fdS9",address:"dao_address__aYi7v",container:"dao_container__aTk5r",page:"dao_page__nwThS",pageContainer:"dao_pageContainer__m7xpJ",arrowButton:"dao_arrowButton__V4z45",owner:"dao_owner__j0rjA",btnContainer:"dao_btnContainer__GERHK",header:"dao_header__un2SN",left:"dao_left__yWJS3",right:"dao_right__HVK05",secondaryButton:"dao_secondaryButton__EuMW_",mainButton:"dao_mainButton__XOO4J",ourCollection:"dao_ourCollection__ka1g3",collectionContainer:"dao_collectionContainer__XmUu1",explain:"dao_explain__RKDjl",purple:"dao_purple__CEhqZ",divider:"dao_divider__Yzuk1",smallDivider:"dao_smallDivider__ntIT3",textInput:"dao_textInput__t4A7O",imageInput:"dao_imageInput___A8Dq",contractBoxGrid:"dao_contractBoxGrid__6dMLr",contractBox:"dao_contractBox__9e_6e",nftBoxGrid:"dao_nftBoxGrid__wnm6W",nftBox:"dao_nftBox__RAzHP",optionSelectBox:"dao_optionSelectBox__hrbYP",selectBoxTitle:"dao_selectBoxTitle__FOV3C",selectBoxDescription:"dao_selectBoxDescription__WI_kk",optionSelectBox1:"dao_optionSelectBox1__DpPDs",selectBoxTitle1:"dao_selectBoxTitle1__PweM4",selectBoxTitle1_1:"dao_selectBoxTitle1_1__6QCqX",selectBoxTitle1_2:"dao_selectBoxTitle1_2__R5RWu",selectBoxDescription1:"dao_selectBoxDescription1__qqd27",selectBoxDescription1_1:"dao_selectBoxDescription1_1__1zL5z",optionSelectBox2:"dao_optionSelectBox2__mdOIg",selectBoxTitle2:"dao_selectBoxTitle2__gjrg0",selectBoxTitle2_1:"dao_selectBoxTitle2_1__Z3NPS",selectBoxTitle2_2:"dao_selectBoxTitle2_2__DgNLP",selectBoxDescription2:"dao_selectBoxDescription2__nbxPF",optionSelectBox3:"dao_optionSelectBox3__B5eRk",selectBoxTitle3:"dao_selectBoxTitle3__MM7bv",selectBoxTitle3_1:"dao_selectBoxTitle3_1__gYhfu",selectBoxTitle3_2:"dao_selectBoxTitle3_2__1cLj4",selectBoxDescription3:"dao_selectBoxDescription3__K63p2",selectBoxDescription3_1:"dao_selectBoxDescription3_1__KLfI_",optionSelectBox4:"dao_optionSelectBox4__l4V4o",selectBoxTitle4:"dao_selectBoxTitle4__usQ22",selectBoxTitle4_1:"dao_selectBoxTitle4_1__0Hh6Y",selectBoxTitle4_2:"dao_selectBoxTitle4_2__EleQX",selectBoxDescription4:"dao_selectBoxDescription4__F_I_P",optionSelectBox5:"dao_optionSelectBox5__EMPdn",optionSelectBox6:"dao_optionSelectBox6__mh1kO",optionSelectBox7:"dao_optionSelectBox7__RhQEZ",optionSelectBox8:"dao_optionSelectBox8__0_QA0",tokenGrid:"dao_tokenGrid__wAhRv",tokenItem:"dao_tokenItem__T8LsV",tokenLabel:"dao_tokenLabel__rks3r",tokenValue:"dao_tokenValue__OmEDf",center:"dao_center__0G73V",spacerTop:"dao_spacerTop__RB_vu",bigSpacerTop:"dao_bigSpacerTop__xjyWT",spacerBottom:"dao_spacerBottom__oZeb4",cardName:"dao_cardName__Jyq2L",cardDescription:"dao_cardDescription___RnXS",headerLogo:"dao_headerLogo__73EzE",verticalSpacer:"dao_verticalSpacer__kOUN_",codeSnippet:"dao_codeSnippet__Bj7W2",noUnderline:"dao_noUnderline__HFHGV",detailPageContainer:"dao_detailPageContainer__Ro1pS",detailPageHr:"dao_detailPageHr__K2U3_",lightPurple:"dao_lightPurple__raQlr",nftMedia:"dao_nftMedia__1cZ4S",amountToClaim:"dao_amountToClaim__te780",noGapBottom:"dao_noGapBottom___SoAa"}}},function(e){e.O(0,[5814,9774,2888,179],function(){return e(e.s=39781)}),_N_E=e.O()}]);